<section 
  ng-show='products.products.length>0' >
  <div class="controls flex flex-center mb3">
    <label class="form__label mr2 mb0" for="stock-quantity">Show products with stock levels less than:</label>
    <div>
      <input 
        ng-model="stockLevelSearch"
        aria-controls="products" 
        class="form__input form__input--number" 
        id="stock-quantity" 
        placeholder="enter quantity" 
        type="number" />
    </div>
  </div>
  <table class="table" id="products">
    <tbody>
      <tr class="table__row-header">
        <th class="table__cell-header">Name</th>
        <th class="table__cell-header">Supplier</th>
        <th class="table__cell-header">Stock Level</th>
        <th class="table__cell-header">Price (ex. tax)</th>
        <th class="table__cell-header">Price (inc. tax)</th>      
      </tr>
      <!-- Clicking a row should take us to the product detail page -->

      <tr 
        ng-repeat="product in products.products" 
        ng-if="stockLevelSearch==0 || product.stock_level < stockLevelSearch"        
        class="table__row">
        <!-- ng-click="setActiveProduct(product);showProductForm(true);" -->
        <td class="table__cell" data-label="Name" >
          
          <a href="#/detail/{{product.id}}" >        
            <span class="color-gray mr1" title="Item number">{{product.id}}</span>{{product.name}}</a></td>
        <td class="table__cell" data-label="Supplier">{{product.product_supplier_name}}</td>
        <td class="table__cell" data-label="Stock Level">{{product.stock_level}}</td>
        <td class="table__cell" data-label="Price (ex. tax)">${{product.price_ex_tax}}</td>
        <td class="table__cell" data-label="Price (inc. tax)">${{product.price_ex_tax}}</td>      
      </tr>
      
    </tbody>
  </table>
</section>